{"ast":null,"code":"import html2canvas from 'html2canvas';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nconst _c0 = [\"contentToCapture\"];\nexport let SssComponent = /*#__PURE__*/(() => {\n  class SssComponent {\n    constructor(http) {\n      this.http = http;\n      this.title = 'canva';\n      this.imageIsLoaded = false;\n      this.imageUrl = \"http://103.255.39.101/Images/Sole-swap/1.png\";\n    }\n\n    ngOnInit() {}\n\n    shareOnWhatsApp() {\n      this.http.get('http://103.255.39.101:3026/proxy', {\n        params: {\n          url: this.imageUrl\n        },\n        responseType: 'text'\n      }).subscribe(response => {\n        this.imageUrl = `data:image/jpeg;base64,${response}`;\n        setTimeout(() => {\n          const elementToCapture = this.contentToCapture.nativeElement;\n          html2canvas(elementToCapture).then(canvas => {\n            canvas.toBlob(blob => {\n              const downloadLink = document.createElement('a');\n              downloadLink.href = URL.createObjectURL(blob);\n              downloadLink.download = 'shared_image.png';\n              downloadLink.click();\n              URL.revokeObjectURL(downloadLink.href);\n            }, 'image/png');\n          });\n        }, 200);\n      }); // const elementToCapture: HTMLElement = this.contentToCapture.nativeElement;\n      // html2canvas(elementToCapture,{useCORS:false}).then(canvas => {\n      //   canvas.toBlob((blob:any) => {\n      //     const downloadLink = document.createElement('a');\n      //     downloadLink.href = URL.createObjectURL(blob);\n      //     downloadLink.download = 'shared_image.png';\n      //     downloadLink.click();\n      //     URL.revokeObjectURL(downloadLink.href);\n      //   }, 'image/png');\n      // })\n    }\n\n  }\n\n  SssComponent.ɵfac = function SssComponent_Factory(t) {\n    return new (t || SssComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n  };\n\n  SssComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SssComponent,\n    selectors: [[\"app-sss\"]],\n    viewQuery: function SssComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.contentToCapture = _t.first);\n      }\n    },\n    decls: 9,\n    vars: 1,\n    consts: [[\"contentToCapture\", \"\"], [\"height\", \"200\", \"alt\", \"\", 3, \"src\"], [3, \"click\"]],\n    template: function SssComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \"sss works!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", null, 0);\n        i0.ɵɵelement(4, \"img\", 1);\n        i0.ɵɵelementStart(5, \"div\");\n        i0.ɵɵtext(6, \"mangal singh\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"button\", 2);\n        i0.ɵɵlistener(\"click\", function SssComponent_Template_button_click_7_listener() {\n          return ctx.shareOnWhatsApp();\n        });\n        i0.ɵɵtext(8, \"Share on WhatsApp\");\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"src\", ctx.imageUrl, i0.ɵɵsanitizeUrl);\n      }\n    },\n    styles: [\"\"]\n  });\n  return SssComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}